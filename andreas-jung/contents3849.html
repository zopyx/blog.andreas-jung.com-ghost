
    <html lang="en">
  
<!-- Mirrored from blog.zopyx.com/andreas-jung/contents?b_start:int=60 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 21 Sep 2020 14:23:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<base  />

    <meta charset="utf-8">
    <title> Blog Andreas Jung - Andreas Jung </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The company for Zope, Plone, Python, MongoDB and Electronic Publishing">
    <meta name="author" content="ZOPYX, Andreas Jung, Tuebingen, Germany">

    <link href="contents/assets/css/bootstrap.css" rel="stylesheet">

    <style>
      body {
        padding-top: 100px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link rel="stylesheet" href="https://blog.zopyx.com/assets/css/font-awesome.css">

    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700" rel="stylesheet" type="text/css">

    <link rel="stylesheet/less" type="text/css" href="https://blog.zopyx.com/assets/less/bootstrap.less" />
    <script type="text/javascript" src="https://blog.zopyx.com/assets/js/less-1.3.1.min.js"></script>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="contents/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" src="https://blog.zopyx.com/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" src="https://blog.zopyx.com/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" src="https://blog.zopyx.com/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" src="https://blog.zopyx.com/assets/ico/apple-touch-icon-57-precomposed.png">

    <link rel="stylesheet" href="https://blog.zopyx.com/assets/css/base.css">
    <link rel="stylesheet" href="https://blog.zopyx.com/bxslider/jquery.bxslider.css">


    <!-- Plone compatibility -->
    
    
  </head>

  <body data-spy="scroll" data-target=".sidebar-nav" class="section-andreas-jung context-contents portal-type-folder">

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          
            
            <a class="brand" style="color: white" href="contents.html">
              <h1>Blog of Andreas Jung</h1>
            </a>
          
          
          
          
           <form id="global-nav-search" class="navbar-search pull-right" action="https://blog.zopyx.com/andreas-jung/search">
            
            <input type="text" class="search-query" placeholder="Search" name="SearchableText" />
           </form>
        </div>
      </div>
    </div>
     <!-- /keyvisual -->
    <article>
      <section>

        <!-- main -->
        <div class="container container-main">
            
            <div class="row-fluid">
                <div></div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    
                    <div id="content">
                      
      

      <a class="label" href="contents/collection.html">
        Overview over all blog items
      </a>

            

      <p class="documentDescription">
        
        <span class="" id="parent-fieldname-description-c568bd3bf1fc41ec8bda748b6ea239ac">
            
        </span>
    
        <span class="visualClear"><!-- --></span>
      </p>
      
      
      
      
      
      <span class="visualClear"><!-- --></span>         
      
      <div id="blog-listing">
        <div class="listingBar">

    <span class="previous">
        <a href="contents83cb.html?b_start:int=50">
           &laquo;
           
               Previous
               10
               items
           
        </a>
    </span>

    <span class="next">
        <a href="contents7589.html?b_start:int=70">
           
               Next
               10
               items
           
           &raquo;
        </a>
    </span>

    
    <span>
        <a href="contents51a2.html?b_start:int=0">1</a>
        
           &hellip;
        
    </span>

    

    
    
        <a href="contents2c2f.html?b_start:int=30">4</a>
    
    
        <a href="contentsa891.html?b_start:int=40">5</a>
    
    
        <a href="contents83cb.html?b_start:int=50">6</a>
    

    
    <span class="current">7</span>

    
    
        <a href="contents7589.html?b_start:int=70">8</a>
    
    
        <a href="contents9f54.html?b_start:int=80">9</a>
    
    
        <a href="contents1477.html?b_start:int=90">10</a>
    

    

    
    <span>
        
        &hellip;
        
        <a href="contentsdf72.html?b_start:int=200">21</a>
    </span>

</div>
      
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">Jul 09, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/plone-the-broken-parts-non-pythonic-programming-model.html">
        <span class="" id="parent-fieldname-title-eea42f09830b4a3bbcc7f2b600ee155c">
            Plone - the broken parts - a non-pythonic programming model
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-eea42f09830b4a3bbcc7f2b600ee155c">
            This is a loose series of blog posts about parts of Plone that I consider as broken from the prospective of a programmer. The blog entries are based on personal experiences with Plone over the last few months collected in new Plone 4.3 projects and some legacy projects but they also reflect experienced learned from other non-core Plone developers involved in these projects (developers on the customer side).
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        <div class="newsImageContainer">
            <a href="contents/plone-the-broken-parts-non-pythonic-programming-model/image/image_view_fullscreen.html" id="parent-fieldname-image">
               <img src="contents/plone-the-broken-parts-non-pythonic-programming-model/image_mini.png" alt="Plone - the broken parts - a non-pythonic programming model" title="" height="52" width="200" class="newsImage" />
            </a>
            
        </div>

        

        <div id="parent-fieldname-text" class="plain">
            <p>Archetypes served for than ten years as framework for building content-types in Plone. Dexterity had been designed as successor of Archetypes with the goal making the content-types development within Plone more easy with less boilerplate. Content-type development should become be more pythonic. Creating a new of a content-type in Plone in a "pythonic way" would look like this:</p>
<pre>obj = plone.api.content.create(some_type)
obj.id = 'foo'
obj.title = u'hello world'
obj.start_time = datetime(...)
</pre>
<p>This approach is in general working as long as all data are stored directly as attributes on the object itself. However there is a problem with the introduction of Dexterity behaviors. Behaviors can implement different storage strategies other than the standard attribute storage. So if a content-type is composed of several behaviors it is not legitimate to read and write object attributes directly that are introduced and managed by a behavior. With many behaviors you need to know which field comes from which behavior exactly. So your code may look like this:</p>
<pre>obj = plone.api.content.create(some_type)<br />adapter1 = IBehavior1(obj)<br />adapter1.field1 = ...<br /><span>adapter1.field2 = ...<br />adapter2 = IBehavior2(obj)<br />adapter2.field3 = ... </span></pre>
<p>You see the problem that this code is no longer pythonic. It exposes the Zope Component Architecture for simple object modifications to a degree that appears wild to non-core Plone developers. It is getting more scary when you need to call a content-type functionality for performing some internal processing like it is needed in plone.app.event:</p>
<pre>from plone.app.event.dx.behaviors import data_postprocessing<br />from plone.app.event.dx.behaviors import IEventBasic<br />event = plone.api.content.create('Event')<br />adapter = IEventBasic(event)<br />adapter.start = datetime(..)<br />adapter.end = datetime(..)<br />data_postprocessing(obj, None)</pre>
<p>This is no the point where we have a communication problem teaching Plone and Dexterity development to average developers. Such a programming model can not be taught to non-Plone people. Most people scratched their head and called what-the-fuck!?</p>
<p>Related topic: hooks and event subscribers. Archetypes offered a bunch of hooks (good or bad) in order to provide additional functionality inside the content-types implementation without needing to hack for example the auto-generated forms for view + edit. E.g. at_post_edit_script() could be used to perform arbitrary actions after submitting the edit form. The ZCA-ish approach are event subscribers where you can register arbitrary methods and handler for various life cycle events. This concept is in general a nice solution if you want to add external behavior to existing (3rd party code) without modifying the actual implementation. But with Dexterity this is also the only solution for hooking your own additional functionality into your own content-type. </p>
<p>Example: in zopyx.existdb we need to push some information from the Dexterity content-type after saving the data in Plone to a different system. This is a core functionality of the content-type <strong>we</strong> are implementing - it is not business logic, it is core functionality and therefore it should be able to implement this directly inside the content-type. Not possible with Dexterity right now. Instead the related code must be moved into an event subscriber outside the scope of the content-type implementation although it belongs to the core implementation. The result is scattered code that actually belongs together into one class. From the prospective of reading code and understanding the programming logic this is not desirable. So in the current programming model you end of with code that belongs to a particular content-type spread over the content-type class, event subscribers and browser views. So there is really a need for having a way to implement hooks in a reasonable way in the scope of the content-type class without explicit event subscribers.</p>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">Jul 09, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/plone-the-broken-parts-member-schema-extenders.html">
        <span class="" id="parent-fieldname-title-5eaf4b089ac74ed39004db3202639f0e">
            Plone - the broken parts - Member schema extenders and plone.api
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-5eaf4b089ac74ed39004db3202639f0e">
            This is a loose series of blog posts about parts of Plone that I consider as broken from the prospective of a programmer. The blog entries are based on personal experiences with Plone over the last few months collected in new Plone 4.3 projects and some legacy projects but they also reflect experienced learned from other non-core Plone developers involved in these projects (developers on the customer side).
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        <div class="newsImageContainer">
            <a href="contents/plone-the-broken-parts-member-schema-extenders/image/image_view_fullscreen.html" id="parent-fieldname-image">
               <img src="contents/plone-the-broken-parts-member-schema-extenders/image_mini.png" alt="Plone - the broken parts - Member schema extenders and plone.api" title="" height="52" width="200" class="newsImage" />
            </a>
            
        </div>

        

        <div id="parent-fieldname-text" class="plain">
            <p class=" ">It is a common project requirement to extend the Plone user memberdata schema. The common approach is perhaps documented here (https://pypi.python.org/pypi/collective.examples.userdata). The additional fields of the memberdata must be defined as a zope.schema. Nothing special - same as definining forms using z3c.form or writing content-types with Dexterity. In a recent project we had a working memberdata  extender and had to extend it with two schema.List fields. Both fields were added to the schema together with the following (working) adapter implementation: </p>
<pre>from plone.app.users.browser.personalpreferences import UserDataPanelAdapter

class EnhancedUserDataPanelAdapter(UserDataPanelAdapter):
    """ Adapter for extended user schema """

    def __init__(self, context):
        super(EnhancedUserDataPanelAdapter, self).__init__(context)
        self.add_property('academic')
        self.add_property('gender')
        self.add_property('phone')
        self.add_property('academic')
        self.add_property('expertise')
        self.add_property('title')
        self.add_property('firstname')
        self.add_property('lastname')
        self.add_property('position')
        self.add_property('phone')
        self.add_property('db_projects')
        self.add_property('specialties')
        self.add_property('institution')
        self.add_property('institution_location')
        self.add_property('memberships')
        self.add_property('projects')
        self.add_property('gender')
        self.add_property('birthday')
        self.add_property('cooperation_interests')
        self.add_property('locations')        

    def add_property(self, name, value=None):
        fget = lambda self: self._get_property(name)
        fset = lambda self, value: self._set_property(name, value)
        setattr(self.__class__, name, property(fget, fset))
        setattr(self, '_' + name, value)

    def _set_property(self, name, value):
        return self.context.setMemberProperties({name: value})

    def _get_property(self, name):
        return self.context.getProperty(name, None)

</pre>
<p class=" "> After restarting Plone, the @@user-information view  crashed directly with the following non-speaking traceback:<span> </span></p>
<pre>Module ZPublisher.Publish, line 138, in publish
Module ZPublisher.mapply, line 77, in mapply
Module ZPublisher.Publish, line 48, in call_object
Module zope.formlib.form, line 795, in __call__
Module five.formlib.formbase, line 50, in update
Module zope.formlib.form, line 758, in update
Module plone.fieldsets.form, line 30, in setUpWidgets
Module zope.formlib.form, line 402, in setUpEditWidgets
Module zope.formlib.form, line 332, in _createWidget
Module zope.component._api, line 107, in getMultiAdapter
Module zope.component._api, line 120, in queryMultiAdapter
Module zope.component.registry, line 238, in queryMultiAdapter
Module zope.interface.adapter, line 532, in queryMultiAdapter
Module zope.component.security, line 77, in factory
Module zope.formlib.itemswidgets, line 52, in CollectionInputWidget
Module zope.component._api, line 109, in getMultiAdapter
ComponentLookupError: ((, None, ), , u'')<span><span> </span></span></pre>
<p class=" "><span><span>What is the problem here from the programmer's prospective: no information about the real problem, no information about the schema field causing the problem. Further investigations using the Python debugger then showed that the problem is related to the two new schema.List fields. "Related" means that we still don't know the reason for the real problem after two or three hours debugging with two persons. Bad programmer experience because we do not get reasonable information from the underlaying view or call it user-information subsystem.</span></span></p>
<p class=" "><span><span>What makes the memberdata extension mechanism even more complicated:</span></span></p>
<ul>
<li><span>exposure of many ZCA related magic or explicit configuration to the programmer</span></li>
<li><span>the programmer still needs to care about additional boilerplate like the adapter implementation</span></li>
<li><span>the programmer still needs to care about the memberdata_schema.xml file</span></li>
</ul>
<div></div>
<div>From the high-level prospective: the schema definition of the extender should be complete enough for defining the memberdata extender. A programmer must be not be confronted with two or three levels of complexity for common tasks. In a perfect world this complexity would be hidden behind some reasonable API providing some reasonable consistency checks and error handling. Right now half-talented programmers are exposed to the full evil of the Zope Component Architecture. Key point of a programmer friendly environment are reasonable APIs. The Zope Component Architecture is not an API, it is an framework. In a perfect world a programmer must not know about the ZCA.</div>
<div></div>
<div><strong>plone.api</strong> is a step in the right direction however partly half-baked and not well-defined. </div>
<div></div>
<div>
<ul>
<li><span>plone.api.user.get_permissions() returns a list of all permissions granted to a user (on a particular object). The common usecase is that you want to check one particular permission. The "old" user.has_permission(permission, context) API is more closely to real usecases than the implemented functionality of plone.api.</span></li>
<li>plone.api.user.get() claims to return the current user object. This is true as long as the user is defined within the context of the Plone site. The method raises an exception for users defined on the Zope root level. You might argue that this an intentional behavior - possibly it is intential but in reality I find this method completely unusable because some code parts are possibly called by site administrators and Zope manager accounts. In both case I want the same code to work with one way to retrieve the current user instead having to provide fallback code for dealing with non-Plone users accounts.</li>
</ul>
</div>
<div></div>
<p class=" "><span><span><br /></span></span></p>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">Jul 02, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/plone-and-exist-db.html">
        <span class="" id="parent-fieldname-title-64eb6b8a76d64caa954d01f958bc485d">
            Plone and eXist-db
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-64eb6b8a76d64caa954d01f958bc485d">
            Connecting Plone with the XML database eXist-db
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        <div class="newsImageContainer">
            <a href="contents/plone-and-exist-db/image/image_view_fullscreen.html" id="parent-fieldname-image">
               <img src="contents/plone-and-exist-db/image_mini.png" alt="Plone and eXist-db" title="" height="58" width="200" class="newsImage" />
            </a>
            
        </div>

        

        <div id="parent-fieldname-text" class="plain">
            <p>Since some years we maintain the <a href="https://www.dgho-onkopedia.de/">Onkopedia</a> site, a medical portal with guidelines in the field of <span>hematology and medical oncology. </span></p>
<p><span>The simplified workflow is like this:</span></p>
<ul>
<li><span>authors (doctors) write their guidelines in Word</span></li>
<li><span>an internal editorial process brings the Word document in shape and checks the documents for consistency and for some style-guide compliance</span></li>
<li><span>we can convert the Word documents to XHTML/CSS using OpenOffice/LibreOffice</span></li>
<li><span>we generate PDF from XHTML/CSS based on a CSS3 Paged Media workflow and publish the PDF documents together with a HTML version on the web through Plone</span></li>
</ul>
<div>For a variety of reasons the complete editorial process will be switched to an XML driven workflow where Plone remains the main web CMS but with a complete new workflow under the hood.  There will be a new Word to XML conversion workflow that will produce XML documents according to some XML schemas that are currently in the making. All documents including their assets (associated images (PNG+SVG), conversion reports etc.) will be stored within the <strong>eXist-db</strong> XML database.</div>
<div></div>
<div>Why eXist-db?</div>
<div>
<ul>
<li><span>hierarchial storage model like Plone/ZODB with collections and subcollections</span></li>
<li><span>indexes HTML/XML out-of-the-box</span></li>
<li><span>stores arbitrary binary data</span></li>
<li>support for the most recent XML technologies like latest XSLT and XQuery versions</li>
<li>various web-service APIs: WebDAV, REST, HTTP, RESTXQ...</li>
<li>easily approachable and easy to use</li>
<li>open-source and a smart and helpful community</li>
<li></li>
</ul>
<p>For the integration of Plone with eXist-db we wrote a small Dexterity-based connector to eXist-db (package <strong>zopyx.existdb</strong>).</p>
<p>The functionality is similar to the old Reflecto product for mounting a local filesystem into Plone.</p>
<p>The connector provides the following functionality:</p>
<ul class="simple">
<li>mounts an arbitary eXist-db collection into Plone</li>
<li>traversal support for traversing by path into subcollections</li>
<li>indexing support (limited to one content document per Connector instance)</li>
<li>pluggable API for custom views</li>
<li>ACE editor integration</li>
<li>ZIP export from eXist-db</li>
<li>ZIP import into eXist-db</li>
<li>preliminary API for calling arbitrary XQuery scripts from Plone<span> </span></li>
</ul>
<div>In our scenario we have several hundreds of individual documents stored in eXist-db in their own collection (aka folder).  Such a collection contains the XML document, the converted HTML version, the PDF version, associated images and SVG graphics, the original Word document etc. Such a collection can be "mounted" into Plone by creating an instance of the Connector associated it with the path to the subcollection. Accessing content by URL traversal is very natural:</div>
<div>http://host:port/plone/documents/connector/@@view/path/inside/existdb/index.html - as part of the application it is possible to register dedicated views by type. In our case we have a special view that renders the main content but also some additional information, links to other resources based on the metadata stored within the XML document. </div>
<div></div>
<div>eXist-db is fully transactional internally - unfortunately transaction support across multiple API operations is currently not available. This is not a major problems since Plone will basically read only from eXist-db - there are only some special functions that allows us to update some metadata stored within some XML documents from the Plone side.</div>
<div></div>
<p>Right now we access content stored within the XML database through the WebDAV layer of eXist-db. A major relief is the Python <strong>pyfilesystem</strong> module that abstracts the filesystem layer (local, WebDAV, SFTP, HTTP, ZIP etc.) through a uniform API. You can read and write to ZIP files and WebDAV directories using the same method. This is a huge advantage because you can easily reconfigure your filesystems or underlaying storage layer easily by changing the URLs of the related systems - this real transparency .</p>
</div>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">Jun 03, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/europython-2014-schedule-available.html">
        <span class="" id="parent-fieldname-title-228d8cfd505a4ef3a1ae1491088bf460">
            EuroPython 2014 schedule available 
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-228d8cfd505a4ef3a1ae1491088bf460">
            
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        <div class="newsImageContainer">
            <a href="contents/europython-2014-schedule-available/image/image_view_fullscreen.html" id="parent-fieldname-image">
               <img src="contents/europython-2014-schedule-available/image_mini.png" alt="EuroPython 2014 schedule available " title="" height="67" width="200" class="newsImage" />
            </a>
            
        </div>

        

        <div id="parent-fieldname-text" class="plain">
            <p>We are happy to announce the availability of the EuroPython 2014 <a href="http://ep2014.europython.eu/en/schedule/schedule" target="_blank">schedule</a> containing the dates and times for trainings, talks and sprints.</p>
<p>If you want to participate in a training then you have to register for this particular training on the training detail page. <span>Every training is limited to 70 participants</span>. All trainings seats are available on a first-come first-served basis. So please register your training participation in advance and as early as possible.</p>
<p>The schedule will see future updates related to EuroPython side events, sponsored talks, talk cancellations etc. </p>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">May 27, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/europython-deadline-for-regular-ticket-sales-23-06-2014.html">
        <span class="" id="parent-fieldname-title-b405685332194a158175dcf57d5261ad">
            EuroPython deadline for regular ticket sales: 23/06/2014
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-b405685332194a158175dcf57d5261ad">
            
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        

        

        <div id="parent-fieldname-text" class="plain">
            <p>This is a short reminder that the regular ticket sale for standard EuroPython 2014 tickets ends on 23/06/2014.</p>
<p>After 23/06/2014 you can only purchase tickets for the (higher) on-desk rate.</p>
<p>So hurry up.</p>
<p><img src="fb-testimonial-root.jpg" alt="" class="image-inline" title="" /></p>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">May 27, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/finally-migrated-all-zopyx-sites-to-a-new-look-feel.html">
        <span class="" id="parent-fieldname-title-c03cace8025b4a898d8bab2b31994c97">
            Finally migrated all ZOPYX sites to a new look &amp; feel
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-c03cace8025b4a898d8bab2b31994c97">
            
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        

        

        <div id="parent-fieldname-text" class="plain">
            <p>It's done.</p>
<p>It only took almost 18 months to move all of my company and personal sites into one Plone version with one look &amp; feel.</p>
<ul>
<li><span>www.zopyx.com</span></li>
<li><span>www.zopyx.de</span></li>
<li><span>www.produce-and-publish.com</span></li>
<li><span>www.produce-and-publish.de</span></li>
<li><span>www.andreas-jung.com</span></li>
<li><span>www.andreas-jung.com/blog</span></li>
</ul>
<div>Yes, of course it uses Bootstrap. Bootstrap 2...well, time to migrate to Bootstrap XX sometime in the future :-)</div>
<div>Life is a never ending migration...take care....</div>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">Mar 24, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/do-you-have-already-purchased-your-europython-2014.html">
        <span class="" id="parent-fieldname-title-871bcd3eb51244498d7a94baf80ea915">
            Do you have your EuroPython 2014 ticket already?
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-871bcd3eb51244498d7a94baf80ea915">
            
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        

        

        <div id="parent-fieldname-text" class="plain">
            <p><a href="https://ep2014.europython.eu/en/registration/ticket-sale/"><img src="fb-testimonial-siprova.jpg" alt="" class="image-inline" title="" /></a></p>
<p><a href="https://ep2014.europython.eu/en/registration/ticket-sale/">https://ep2014.europython.eu/en/registration/ticket-sale/</a></p>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">Mar 13, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/bad-dexterity-application-design.html">
        <span class="" id="parent-fieldname-title-1bbd92690a4f4dd09eadffbd79357ce3">
            Bad Dexterity application design - what the fuck?
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-1bbd92690a4f4dd09eadffbd79357ce3">
            
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        

        

        <div id="parent-fieldname-text" class="plain">
            <p>I apologize for another Plone rant but the following issue costed my some nerves and customer money.</p>
<p>We are currently leading a large Plone 2 -&gt; Plone 4.3 + Dexterity project and we are using plone.app.event. </p>
<p>According to every documentation and knowledge about Dexterity we created our events in our migration script using</p>
<p class="callout">event = invokeFactory('Event', ..)<br />event.start = datetime(....)<br />event.end = datetime(...)</p>
<p class=" ">We all learned that you can set/get the value of a content-type directly through attribute access. Unfortunately those events resulted in a <a href="https://github.com/plone/plone.app.event/issues/147">broken view</a>.</p>
<p class=" ">It turned out that you can not modify the start and end properties of an Event instance directly but instead you have modify then through a behavior:</p>
<p class="callout">from plone.event.interfaces import IEventAccessor <br />acc = IEventAccessor(event) <br />acc.start = DateTime() <br />acc.end = DateTime()</p>
<p class=" ">But how bad is this? First, no documentation but much more worse: do I have for every single content-type and for every property the way how to modify it? Do I need to figure out if access attribute is the way to go or some other way (like through the behavior interface)? This approach is completely absurd. It is completely absurd for 1.X release. It is completely absurd having to teach this people developing with Plone without in-depth background. Wasn't Dexterity invented with the goal for making programming content-types in Plone much easier? Now this!? You guys are serious?</p>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">Feb 11, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/debugging-a-zodb-bloat.html">
        <span class="" id="parent-fieldname-title-aba6fbf367314b59a3e156b5fdb1111b">
            Debugging a ZODB bloat
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-aba6fbf367314b59a3e156b5fdb1111b">
            
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        

        

        <div id="parent-fieldname-text" class="plain">
            <p>We just earned a larger Plone 4.0 project where the majority of the code appeared in a very bad shape  - basically a summary of all coding mistakes you could do. While trying to migrated the codebase to Plone 4.2.6 we figured out that rendering a simple read-only view of an Archetypes based content-type caused a ZODB write operation of 3-4 KB each time. Inspecting the code of the content class did not directly reveal any pointer to the problem. The methods called during the rendering of the 'view' view did not assign to 'self' - so there was no obvious reason for any badly written code. But how to track this down?</p>
<p>A good start is the <a href="http://developer.plone.org/troubleshooting/transactions.html">troubleshooting section</a> of the Plone documentation - in particular the usage of the debug.py script at the end of the page. Looking at the latest transaction of the ZODB showed us that the transaction is really caused by the 'Artikel' content-type that made us suspicious. But the output of debug.py did not reveal which attributes of the persistent 'Artikel' instance really changed.</p>
<p>The solution is to look into the __setattr__() calls of the related object. So I added a custom __setattr_() implementation to the content-type 'Artikel':</p>
<p class="callout">class Artikel(ATDocument):<br /><span>    def __setattr__(self, k, v):<br /></span><span>        print k,v <br /></span><span>        return super(Artikel, self).__setattr__(k, v)</span></p>
<p class=" "><span>This __setattr_() implementation would be called for every change of an attribute on the 'Artikel' instance. Re-running the instance and re-rendering the object produced the following output:</span></p>
<pre class=" ">_p_serial ���:S��<br />_p_estimated_size 3634<br />__provides__ &lt;zope.interface.Provides object at 0x7f150caad490&gt;<br />__provides__ &lt;zope.interface.Provides object at 0x7f150caad490&gt;<br />_p_serial ��v(w<br />_p_estimated_size 3301</pre>
<p class=" ">The _p_ attributes are internal attributes used by the ZODB - they appeared normal however there were also changes to the __provides__ attribute of the instance. This happens usually when you attach a marker interface to a persistent object using alsoProvides(). So we grepped through the code and found this:</p>
<p class="callout">def get_average_rating(self):<br />     alsoProvides(self, IUserRatable)<br />     adapted = IUserRating(self)<br />     return adapted.averageRating<br /><br /><span>def get_rating_count(self):<br /></span><span>    alsoProvides(self, IUserRatable)<br /></span><span>    adapted = IUserRating(self)<br /></span><span>    return adapted.numberOfRatings</span></p>
<p class=" "><span>Both methods are called during the rendering of the 'view' view and with every call it re-attaches/modifies the IUserRatable interface to the instance of the Artikel.....BAD BAD BAD.....moving the code to a place where is is called only once per object resolved the issue and the ZODB bloat.</span></p>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
          <div class="blog-item">
            


  
  
  
    <div class="row">  
        <div class="span12">
            <span class="label">Jan 31, 2014</span>
            <h1 class="documentFirstHeading"><a href="contents/early-bird-ticket-sale-starts-on-wednesday-05-02-2014.html">
        <span class="" id="parent-fieldname-title-e7fdea502aa8491eb63af8b0ddd5bda5">
            EuroPython 2014: Early Bird ticket sale starts on Wednesday, 05/02/2014
        </span>
    </a></h1>
            <h4 class="documentDescription">
        <span class="" id="parent-fieldname-description-e7fdea502aa8491eb63af8b0ddd5bda5">
            A limited number of EuroPython 2014 tickets will be available from Wednesday on for a reduced price.
        </span>
    </h4>
        </div>
    </div>
    <div class="row">  
        <div class="span12 blog-content">
            

        
        <div class="newsImageContainer">
            <a href="contents/early-bird-ticket-sale-starts-on-wednesday-05-02-2014/image/image_view_fullscreen.html" id="parent-fieldname-image">
               <img src="contents/early-bird-ticket-sale-starts-on-wednesday-05-02-2014/image_mini.png" alt="EuroPython 2014: Early Bird ticket sale starts on Wednesday, 05/02/2014" title="" height="67" width="200" class="newsImage" />
            </a>
            
        </div>

        

        <div id="parent-fieldname-text" class="plain">
            <p>We are pleased to announce that the EuroPython 2014 ticket sale will start next Wednesday, 05/02/2014 with the Early Bird ticket phase.</p>
<p>There is a contingent of 300 tickets that will be sold to a reduced price in three categories:</p>
<ul>
<li><span>Business</span></li>
<li><span>Personal</span></li>
<li><span>Student</span></li>
</ul>
<p>If you are a student and want to get the student discount, please email a copy of your student identity card to <a href="mailto:helpdesk@europython.eu">helpdesk@europython.eu</a> once the sale has started.</p>
<p>An email prior the to sale start will not be considered. The requests will be processed in the order they are received.</p>
        </div>


         
    
        </div>
    </div>
    <hr />
  



            
          </div>
        
        
        <div class="listingBar">

    <span class="previous">
        <a href="contents83cb.html?b_start:int=50">
           &laquo;
           
               Previous
               10
               items
           
        </a>
    </span>

    <span class="next">
        <a href="contents7589.html?b_start:int=70">
           
               Next
               10
               items
           
           &raquo;
        </a>
    </span>

    
    <span>
        <a href="contents51a2.html?b_start:int=0">1</a>
        
           &hellip;
        
    </span>

    

    
    
        <a href="contents2c2f.html?b_start:int=30">4</a>
    
    
        <a href="contentsa891.html?b_start:int=40">5</a>
    
    
        <a href="contents83cb.html?b_start:int=50">6</a>
    

    
    <span class="current">7</span>

    
    
        <a href="contents7589.html?b_start:int=70">8</a>
    
    
        <a href="contents9f54.html?b_start:int=80">9</a>
    
    
        <a href="contents1477.html?b_start:int=90">10</a>
    

    

    
    <span>
        
        &hellip;
        
        <a href="contentsdf72.html?b_start:int=200">21</a>
    </span>

</div>
        
        <span class="visualClear"><!-- --></span>         
      </div>
     
      
    
                    </div>
                  
                </div>
                <!-- right slot -->
                
          </div>
        </div>

        <!-- main front-page -->
        
      <div class="footer-push"></div>
    
      </section>
    </article>
    <!-- ----------------------------------- /Footer -->
    

<!-- Matomo -->
<script type="text/javascript">
  var _paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="http://matomo.zopyx.com/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '8']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->


    <script type="text/javascript" src="contents/assets/js/jquery.js"></script>
    <script type="text/javascript" src="contents/assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://blog.zopyx.com/jquerytools/jquery.tools.min.js"></script>
    <script type="text/javascript" src="https://blog.zopyx.com/readmore/jquery.readmore.min.js"></script>
    <script type="text/javascript" src="https://blog.zopyx.com/isotope/jquery.isotope.js"></script>
    <script type="text/javascript" src="https://blog.zopyx.com/hyphenator/hyphenate.js"></script>
    <script type="text/javascript" src="https://blog.zopyx.com/cycle/jquery.cycle.js"></script>
    <script type="text/javascript" src="https://blog.zopyx.com/bxslider/jquery.bxslider.min.js"></script>


    <script type="text/javascript">
        $('.carousel').carousel({interval: 6000});
        $('.readmore').readmore({substr_len: 250});
        $('input[type="submit"]').addClass('btn btn-success');
        $('input[type="reset"]').addClass('btn btn-danger');
        if ($('body').width() > 640) {
            $('.image-cycle').cycle({fx: 'fadeZoom', speed: 1000, timeout: 5000});
            $('.bxslider').bxSlider({randomStart: true,speed: 1000, pause:4000, auto: true});
            $('.bxslider1').bxSlider({randomStart: true,speed: 1000, pause:4000, auto: true});
            $('.bxslider-pp').bxSlider({randomStart: false, mode: 'fade', speed: 1000, pause:7000, auto: true, infiniteLoop: true, controls: false});
        }  
        /*
        Hyphenator.config({
            displaytogglebox : true,
            minwordlength : 4,
            defaultlanguage: 'de',
            classname: 'content'
        });
        Hyphenator.run();
        */

        // Resize iframe.fluid (Slideshare, YouTube integration)
        $(function() {
            var $slides= $('iframe.fluid');
            $slides.each(function() {
                $(this)
                    .data('aspectRatio', this.height / this.width)
                    .removeAttr('height')
                    .removeAttr('width');
            });
            // When the window is resized
            // (You'll probably want to debounce this)
            $(window).resize(function() {

                $fluidEl = $(".media-item");
                var newWidth = $fluidEl.width() *0.9;
                
                // Resize all videos according to their own aspect ratio
                $slides.each(function() {

                    var $el = $(this);
                    $el.width(newWidth)
                       .height(newWidth * $el.data('aspectRatio'));

                });
            // Kick off one resize to fix all videos on page load
            }).resize();
        });

    </script>

    <!-- Jira feedback collector -->
    
    


  </body>

<!-- Mirrored from blog.zopyx.com/andreas-jung/contents?b_start:int=60 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 21 Sep 2020 14:23:59 GMT -->
</html>

